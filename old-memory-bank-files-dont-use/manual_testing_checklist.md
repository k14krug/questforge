# Manual Testing Checklist: Campaign Generation Flow

This checklist outlines the steps to manually test the initial campaign generation functionality (Phase 1 components up to `ai_service.get_response` implementation).

## 1. Prerequisites

*   [ ] Ensure the Flask development server is running (`flask run` or similar).
*   [ ] Ensure the database is initialized and accessible by the application.
*   [ ] Verify that at least one Template exists in the `templates` table in your database. Note its `id`.
*   [ ] Confirm the `OPENAI_API_KEY` environment variable is correctly set for the running Flask application.

## 2. Authentication & Setup

*   [ ] Open the QuestForge web application in your browser.
*   [ ] Log in with a valid user account.
*   [ ] Open your browser's developer tools (usually F12). Go to the "Network" or "Application" (or "Storage") tab to find cookies.
*   [ ] Locate the `session` cookie and copy its value. You'll need this for the `Cookie` header.

cookie value = .eJwljjtqBTEMAO_iOoVsybL1LrPoS0Iggd33qpC7ZyHlTDHMTzvqzOu9PZ7nK9_a8RHt0YQTOw0eEOiFPtMotetSm1HgBhGlpRvnylEFwGQj2Vhkb5qdnaxTQNDaGWsZ0JAp4tkLUdeSmIZmbg4dnFyh32HkXT4J2j3yuvL8vxk3-nXW8fz-zK9bYAeyWKwgW_YE1uHdNZK3OiLRyGRZ1H7_AGIEP78.Z-m67g.zaFvmh5riUVYFGF-zAcW_qUEb40

curl -X POST http://127.0.0.1:5014/api/games/create \
  -H "Content-Type: application/json" \
  -H "Cookie: session=.eJwljjtqBTEMAO_iOoVsybL1LrPoS0Iggd33qpC7ZyHlTDHMTzvqzOu9PZ7nK9_a8RHt0YQTOw0eEOiFPtMotetSm1HgBhGlpRvnylEFwGQj2Vhkb5qdnaxTQNDaGWsZ0JAp4tkLUdeSmIZmbg4dnFyh32HkXT4J2j3yuvL8vxk3-nXW8fz-zK9bYAeyWKwgW_YE1uHdNZK3OiLRyGRZ1H7_AGIEP78.Z-m67g.zaFvmh5riUVYFGF-zAcW_qUEb40" \
  -d '{
    "template_id": 2,
    "name": "Test Adventure",
    "user_inputs": {
      "question_key_1": "Kent",
      "question_key_2": "Get Rich"
    }
  }'

## 3. Identify Template Details

*   [ ] Navigate the web UI (or query the database directly) to find the `id` of the Template you want to use for testing (let's call this `TEST_TEMPLATE_ID`).
*   [ ] Determine the expected keys for the `user_inputs` dictionary based on the questions defined in that specific template's `question_flow`. (You might need to inspect the template details in the UI or DB).

## 4. Prepare and Execute API Call

*   [ ] Open a terminal or an API client tool (like Postman or Insomnia).
*   [ ] Construct the API request:
    *   **Method:** `POST`
    *   **URL:** `http://127.0.0.1:5000/api/games/create` (Adjust host/port if needed)
    *   **Headers:**
        *   `Content-Type: application/json`
        *   `Cookie: session=YOUR_COPIED_SESSION_VALUE` (Paste the copied session cookie value here)
    *   **Body (JSON):**
        ```json
        {
            "template_id": TEST_TEMPLATE_ID, // Use the actual ID
            "name": "My Manual Test Game",
            "user_inputs": {
                // Add the keys and sample values based on the template's questions
                "question_key_1": "Sample Answer 1",
                "question_key_2": "Sample Answer 2"
            }
        }
        ```
*   [ ] Send the API request.

## 5. Verify Results

*   [ ] **Check API Response:**
    *   Did you receive an HTTP status code `201 Created`?
    *   Does the JSON response body contain keys like `message`, `game_id`, `campaign_id`, and `redirect_url`? Note the returned `game_id` and `campaign_id`.
*   [ ] **Check Server Logs:**
    *   Look at the console where the Flask server is running.
    *   Do you see the `print` statements indicating progress through the API endpoint, campaign service, and AI service?
    *   Are there any Python tracebacks or error messages?
*   [ ] **Check Database:**
    *   Connect to your application's database.
    *   Check the `games` table for a new record with the `game_id` from the API response.
    *   Check the `campaigns` table for a new record with the `campaign_id` from the API response and the correct `game_id`. Examine its `campaign_data`, `objectives`, and `key_characters` columns – do they contain plausible data generated by the AI?
    *   Check the `game_states` table for a new record associated with the `game_id` and `campaign_id`. Examine its `state_data` column – does it contain the `initial_state` generated by the AI?

Following these steps will help verify if the campaign generation flow is working correctly end-to-end up to the current point of implementation.
